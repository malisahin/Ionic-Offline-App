<ion-grid>
  <ion-row>
    <ion-col col-12 col-sm>
      <button ion-button primary round full (click)="hizmetDetayaGit()"
              [disabled]="isHizmetDisabled()">
        <ion-icon style="width: 20%" name="add-circle"></ion-icon>
        <ion-label style="width: 80%">Yeni</ion-label>
      </button>
    </ion-col>

    <ion-col col-12 col-sm>
      <button ion-button primary round full [disabled]="isHizmetDisabled()"
              (click)="siparisOlustur()">
        <ion-icon style="width: 20%" name="basket"></ion-icon>
        <ion-label style="width: 80%">Sipariş Oluştur</ion-label>
      </button>
    </ion-col>
  </ion-row>
</ion-grid>

<ion-grid *ngIf="detayList != null && detayList.length > 0">
  <ion-row>
    <ion-col col-12 col-sm>
      <ion-label>İşlem Tipi</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>İşlem Kodu</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>Miktar</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>Tutar</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>

    </ion-col>
  </ion-row>

  <ion-row *ngFor="let detay of detayList">
    <ion-col col-12 col-sm>
      <ion-label>{{detay.mlzIsc}}</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>{{detay.mlzIscKod}} - {{detay.aciklama}}</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>{{detay.miktar}}</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>{{detay.tutar}}</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <button ion-button icon-only (click)="updateHizmetDetay(detay)"
              [disabled]="isHizmetDisabled()">
        <ion-icon name="create" small></ion-icon>
      </button>
      <button ion-button icon-only (click)="deleteHizmetDetay(detay)"
              [disabled]="isHizmetDisabled()">
        <ion-icon name="close-circle" small></ion-icon>
      </button>
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col col-12 col-sm>
      <ion-label></ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label></ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>KDV'li Toplam Tutar</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>
      <ion-label>{{toplamTutar}}</ion-label>
    </ion-col>
    <ion-col col-12 col-sm>

    </ion-col>
  </ion-row>
</ion-grid>

<ion-list>
  <button ion-button (click)="toggleDetails()" full color="light" round>
    <ion-icon name='arrow-down'></ion-icon>
    Kapatma İşlemleri
  </button>
  <div id="divKapatmaIslemleri" *ngIf="showDetails == -1">
    <ion-grid>
      <ion-row>
        <ion-col col-12 col-md-6 col-sm>
          <button ion-button round color="secondary" (click)="kapat('ACIK')"
                  [disabled]="isHizmetDisabled()" full>Kapat
          </button>
        </ion-col>
        <ion-col col-12 col-md-6 col-sm>
          <button ion-button round color="secondary" [disabled]="isHizmetDisabled()"
                  (click)="hizmetIptalKontrol()" full>
            Iptal
          </button>
        </ion-col>
        <ion-col col-12 col-md-6 col-sm>
          <button ion-button round color="secondary" (click)="yazdir()" full>Yazdır</button>
        </ion-col>
        <ion-col col-12 col-md-6 col-sm>
          <button ion-button round color="secondary"
                  [disabled]="isHizmetDisabled()"
                  (click)="hizmetSilKontrol()" full>
            Sil
          </button>
        </ion-col>
      </ion-row>


    </ion-grid>

    <ion-list inset>

      <ion-item>
        <ion-label color="primary">Açıklama</ion-label>
        <ion-textarea [(ngModel)]="hizmet.aciklama"
                      [disabled]="isHizmetDisabled()"
                      (ionChange)="onHizmetChange()"></ion-textarea>
      </ion-item>


      <ion-item>
        <ion-label color="primary">Kapatma Şekli</ion-label>
        <ion-select [(ngModel)]="hizmet.kapatmaKodu"
                    [disabled]="isHizmetDisabled()"
                    (ionChange)="onHizmetChange()">
          <ion-option value="NORMAL">Normal Kapatma</ion-option>
          <ion-option value="MESGULIYET">Meşguliyet Kapatma</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color="primary">Ödeme Tipi</ion-label>
        <ion-select [(ngModel)]="hizmet.odemeTipi"
                    [disabled]="isHizmetDisabled()"
                    (ionChange)="onHizmetChange()">
          <ion-option value="NAKIT">Nakit</ion-option>
          <ion-option value="KREDIKARTI">Kredi Kartı</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color="primary">Çözüm Kodu</ion-label>

        <ion-select [(ngModel)]="hizmet.cozumKodu"
                    [disabled]="isHizmetDisabled()"
                    (ionChange)="onHizmetChange()">
          <ion-option *ngFor="let cozum of cozumKoduList" [value]="cozum.kod">{{cozum.ad}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color="primary">Iletişim Istek</ion-label>
        <ion-label color="primary" style="text-align: end">{{iletisimIstek == true ? 'EVET' : 'HAYIR'}}</ion-label>
        <ion-toggle (ionChange)="iletisimIstekChange()" style="text-align: end"
                    [disabled]="isHizmetDisabled()"
                    [(ngModel)]="iletisimIstek"></ion-toggle>
      </ion-item>

    </ion-list>
  </div>
</ion-list>
